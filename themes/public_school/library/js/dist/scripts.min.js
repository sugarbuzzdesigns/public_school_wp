/*
 * Bones Scripts File
 * Author: Eddie Machado
 *
 * This file should contain any js scripts you want to add to the site.
 * Instead of calling it in the header or throwing it inside wp_head()
 * this file will be called automatically in the footer so as not to
 * slow the page load.
 *
 * There are a lot of example functions and tools in here. If you don't
 * need any of it, just remove it. They are meant to be helpers and are
 * not required. It's your world baby, you can do whatever you want.
 */
function debounce(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}/*
 * Get Viewport Dimensions
 * returns object with viewport dimensions to match css in width and height properties
 * ( source: http://andylangton.co.uk/blog/development/get-viewport-size-width-and-height-javascript )
 */
function updateViewportDimensions(){var a=window,b=document,c=b.documentElement,d=b.getElementsByTagName("body")[0],e=a.innerWidth||c.clientWidth||d.clientWidth,f=a.innerHeight||c.clientHeight||d.clientHeight;return{width:e,height:f}}var PS={},viewport=updateViewportDimensions(),waitForFinalEvent=function(){var a={};return function(b,c,d){d||(d="Don't call this twice without a uniqueId"),a[d]&&clearTimeout(a[d]),a[d]=setTimeout(b,c)}}();PS.env={touch:!!$("html").hasClass("touch")};
// how long to wait before deciding the resize has stopped, in ms. Around 50-100 should work ok.
var timeToWaitForLast=100;$(window).on("resize",function(){waitForFinalEvent(function(){$(window).trigger("resize-done")},500,"some unique string")}),setTimeout(function(){$("#loader").fadeOut()},2400);var PS=PS||{};!function(a){PS.Highlighter={init:function(){this.mobile=WURFL.is_mobile,this.$paper=a(".paper"),this.$paperWrap=a(".paper-wrap"),this.$hlToolbar=a(".highlighter-sessions-toolbar"),this.$win=a(window),this.winHeight=this.$win.outerHeight(),this.hlToolbarHeight=this.$hlToolbar.outerHeight(),this.paperHeight=null,this.bindEvents(),this.initPaper(),this.mobile&&"Tablet"!=WURFL.form_factor&&this.runExample()},bindEvents:function(){var b=this;b.mobile&&"Tablet"!=WURFL.form_factor?a("mark").click(function(){a(this).is(".show-phrase")?b.resetPhrase(this):b.showPhrase(this)}):a("mark").hover(function(){b.showPhrase(this)},function(){b.resetPhrase(this)}),a(".menu-btn .info, .close-menu").click(function(){a("body").is(".mobile-menu-open")?b.closeMobileMenu():b.openMobileMenu()}),a(".toggle-paper").on("click",function(){b.togglePaper(this)}),a(window).on("resize",b.resizeDebounceFunc).resize()},resizeDebounceFunc:debounce(function(){window.getComputedStyle(document.querySelector("body"),":after")},250),initPaper:function(){a(".paper mark").each(function(){var b,c=a(this),d=(a(this).find(".text"),c.data("gif"),a('<span class="text"></span>')),e=c.html();c.empty(),txtarr=e.split(" "),d.appendTo(c),a(txtarr).each(function(d,e){b=a("<span><em>"+e+"</em></span>"),b.appendTo(c.find(".text"))})}),this.mobile&&"Tablet"!=WURFL.form_factor?a(".paper").css({top:this.winHeight-a(".paper").outerHeight()}):a(".paper").css({opacity:1})},runExample:function(){var b=this;b.$paper.addClass("example"),a("mark").eq(0).addClass("show-phrase"),setTimeout(function(){a("mark").eq(0).removeClass("show-phrase"),setTimeout(function(){b.$paper.removeClass("example")},500)},1e3)},togglePaper:function(){a(".paper").hasClass("show-me")?(a(".toggle-paper").removeClass("open"),a(".paper").removeClass("show-me"),a("section").not("#header").show(),this.$paperWrap.css({top:this.winHeight-a(".paper").outerHeight()})):(a(".toggle-paper").addClass("open"),a(".paper").addClass("show-me"),a("section").not("#header").hide(),this.$paperWrap.css({top:a(".highlighter-sessions-toolbar").offset().top+a(".highlighter-sessions-toolbar").height()}),a("body, html").animate({scrollTop:a(".highlighter-sessions-toolbar").offset().top}))},openMobileMenu:function(){a(".mobile-menu").css("height",window.innerHeight),a("body").addClass("mobile-menu-open")},closeMobileMenu:function(){a("body").removeClass("mobile-menu-open")},showPhrase:function(b){var c=this,d=a(b),e=(a("mark",d),window.location.href+"/images/gifs/"),f=e+d.data("gif");d.addClass("show-phrase"),c.mobile&&"Tablet"!=WURFL.form_factor||a(".giffify").css({"background-image":"url("+f+")",opacity:.5})},resetPhrase:function(b){var c=a(b);c.removeClass("show-phrase"),a(".giffify").css({opacity:0})},resetAllPhrases:function(){a("show-phrase").removeClass("show-phrase"),a(".giffify").css({opacity:0})}},a(function(){PS.Highlighter.init()})}(jQuery);var PS=PS||{};!function(a){window.$=a,PS.Contact={init:function(){this.$lettersResting=a(".letter-resting"),this.$lettersHover=a(".letter-hover"),this.$lettersCopy=a([]),this.setOrigHoverLetters(),this.createRestingLetters(),this.setLetterPositionRestingData(),this.setLetterPositionHoverData(),this.setInitialLetterPosition(),this.bindEvents()},bindEvents:function(){var b=this;PS.env.touch&&a(".city").on("in-view-down",function(){}),a(".city").hover(function(){a(this).hasClass("hovered")?b.animateLettersReset(a(this)):b.animateLettersHover(a(this))}),a(window).on("resize-done",function(){PS.Contact.resetLettersOnResize()})},setOrigHoverLetters:function(){a(".city").each(function(b,c){var d=a(c).find(".hover-content .inner").position().top;a(".hover-letters",a(c)).css({top:d})})},setLetterPositionRestingData:function(){this.$lettersResting.each(function(b,c){var d={top:0,left:0};a(c).attr("id","rest-letter-"+b),d.top=a(c).position().top,d.left=a(c).position().left,a(c).attr("data-position-top",d.top),a(c).attr("data-position-left",d.left),a(c).data("full-position",d),a(".letter-copy").eq(b).data("full-position",d)})},setLetterPositionHoverData:function(){this.$lettersHover.each(function(b,c){pos={top:0,left:0},a(c).attr("id","hov-letter-"+b),pos.top=a(c).position().top,pos.top+=a(c).offsetParent().position().top,pos.top+=a(c).offsetParent().offsetParent().position().top,pos.left=a(c).position().left,pos.left+=a(c).offsetParent().position().left,pos.left+=a(c).offsetParent().offsetParent().position().left,a(c).attr("data-position-top",pos.top),a(c).attr("data-position-left",pos.left),a(c).data("full-position",pos),a(".letter-copy").eq(b).data("full-position-hover",pos)})},createRestingLetters:function(){var b,c=this;this.$lettersResting.each(function(d,e){b=a(e).data("full-position"),$newLetter=a('<span class="letter-copy"></span>').html(a(e).html()).appendTo(a(e).closest(".city")),c.$lettersCopy.push($newLetter)})},setInitialLetterPosition:function(){var b,c=this;a(".letter-copy").each(function(d,e){b=a(e).data("full-position"),c.moveLetters(a(e),b)})},moveLetters:function(a,b){a.css({position:"absolute",top:b.top,left:b.left})},resetLettersOnResize:function(){this.setOrigHoverLetters(),this.setLetterPositionRestingData(),this.setLetterPositionHoverData(),this.setInitialLetterPosition()},animateLettersHover:function(b){a(".letter-copy",b).each(function(b,c){a(c).css({top:a(c).data("fullPositionHover").top,left:a(c).data("fullPositionHover").left})}),b.addClass("hovered")},animateLettersReset:function(b){a(".letter-copy",b).each(function(b,c){a(c).css({top:a(c).data("fullPosition").top,left:a(c).data("fullPosition").left})}),b.removeClass("hovered")}},a(function(){setTimeout(function(){PS.Contact.init(),PS.Contact.resetLettersOnResize()},1e3)})}(jQuery);var PS=PS||{};!function(a){PS.WaypointSetup={init:function(){this.bindEvents(),this.waypointElements=["#contact .city"],this.bindInViewWaypoints(),this.bindOutOfViewWaypoints()},bindEvents:function(){_this=this,
// PS.env.touch/
// waypoint notification for each section
a("#overview").waypoint({handler:function(b){"down"===b&&a(".contact-butter-bar").addClass("show")},offset:"85%"}),a("#header").waypoint({handler:function(b){"up"===b&&a(".contact-butter-bar").removeClass("show")},offset:"-20%"}),a(".footer").waypoint({handler:function(b){"up"===b?a(".contact-butter-bar").addClass("show"):a(".contact-butter-bar").removeClass("show")},offset:"100%"}),a("#jobs .highlight-text").waypoint({handler:function(b){"down"===b&&a("#jobs").trigger("in-view-down")},offset:function(){
// when the bottom of the element hits the bottom of the viewport
return Waypoint.viewportHeight()-a("#jobs .highlight-text").height()}}),a(".scroll-waypoint").waypoint({handler:function(b){a(this.element).addClass("show-me")},offset:function(){
// when the bottom of the element hits the bottom of the viewport
return Waypoint.viewportHeight()-a(".contact-butter-bar").height()-20}})},bindInViewWaypoints:function(b){a(this.waypointElements).each(function(b,c){var d=a(c);
// waypoint notification city elemnts are IN OF view
d.waypoint({handler:function(b){"down"===b&&(a(this.element).trigger("in-view-down"),a(this.element).addClass("in-view seen-once"))},offset:function(){
// when the bottom of the element hits the bottom of the viewport
return Waypoint.viewportHeight()-this.element.clientHeight}}),
// waypoint notification city elemnts are IN OF view
d.waypoint({handler:function(b){"up"===b&&(a(this.element).trigger("in-view-up"),a(this.element).addClass("in-view seen-once"))},offset:function(){
// when the bottom of the element hits the bottom of the viewport
return-Waypoint.viewportHeight()/2+this.element.clientHeight}})})},bindOutOfViewWaypoints:function(){a(this.waypointElements).each(function(b,c){var d=a(c);
// waypoint notification city elemnts are OUT OF view
d.waypoint({handler:function(b){"down"===b&&(a(this.element).trigger("out-of-view-down"),a(this.element).removeClass("in-view"))},offset:function(){
// when the bottom of the element hits the bottom of the viewport
return-Waypoint.viewportHeight()+this.element.clientHeight}}),
// waypoint notification city elemnts are OUT OF view
d.waypoint({handler:function(b){"up"===b&&(a(this.element).trigger("out-of-view-up"),a(this.element).removeClass("in-view"))},offset:function(){
// when the bottom of the element hits the bottom of the viewport
return Waypoint.viewportHeight()}})})}},a(function(){PS.WaypointSetup.init()})}(jQuery);// Homepage Slider for Team Members
var PS=PS||{};!function(a){PS.TeamSlider={init:function(){this.$sliderContainer=a(".team-slider"),this.$teamMembers=a(".team-member"),this.$contentNav=a(".content-nav"),this.$contentNavItems=a("li",this.$contentNav),this.sliderOptions={adaptiveHeight:!0,mode:"fade",pager:!1,nextSelector:"#slider-next",prevSelector:"#slider-prev",onSliderLoad:function(){a("body").trigger("slider-loaded"),Waypoint.viewportWidth()<768&&a(".content-nav").css({position:"absolute",top:a(".team-member-photo").position().top+a(".team-member-photo").height()}),a(".content-nav").css({opacity:1})},onSlideBefore:function(){}},this.setupSlider(),this.bindEvents()},setupSlider:function(){var a=this;this.teamSlider=this.$sliderContainer.bxSlider(this.sliderOptions),this.$sliderContainer.addClass("loaded"),setTimeout(function(){a.teamSlider.redrawSlider()},100)},bindEvents:function(){var b=this;b.$contentNavItems.on("click",function(){var c=a(this).data("about-navitem");b.setActiveNavitem(a(this)),b.updateCopySlide(c)})},updateCopySlide:function(b){var c=this,d=this.getCurrentSlideJquery(),b='[data-nav-id="'+b+'"]';a(".content",d).css({height:a(b,d).outerHeight()}),a(b,d).siblings().not("nav").hide(),a(b,d).fadeIn(),c.teamSlider.redrawSlider()},setActiveNavitem:function(a){a.addClass("active").siblings().removeClass("active")},getCurrentSlideJquery:function(){return this.$teamMembers.eq(this.teamSlider.getCurrentSlide())}},a(function(){PS.TeamSlider.init()})}(jQuery);