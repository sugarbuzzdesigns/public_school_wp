var PS=PS||{};!function(a){PS.Highlighter={init:function(){this.mobile=WURFL.is_mobile,this.$paper=a(".paper"),this.$paperWrap=a(".paper-wrap"),this.$hlToolbar=a(".highlighter-sessions-toolbar"),this.$win=a(window),this.winHeight=this.$win.outerHeight(),this.hlToolbarHeight=this.$hlToolbar.outerHeight(),this.paperHeight=null,this.bindEvents(),this.initPaper(),this.mobile&&"Tablet"!=WURFL.form_factor&&this.runExample()},bindEvents:function(){var b=this;b.mobile&&"Tablet"!=WURFL.form_factor?a("mark").click(function(){a(this).is(".show-phrase")?b.resetPhrase(this):b.showPhrase(this)}):a("mark").hover(function(){b.showPhrase(this)},function(){b.resetPhrase(this)}),a(".menu-btn .info, .close-menu").click(function(){a("body").is(".mobile-menu-open")?b.closeMobileMenu():b.openMobileMenu()}),a(".toggle-paper").on("click",function(){b.togglePaper(this)}),a(window).on("resize",b.resizeDebounceFunc).resize()},resizeDebounceFunc:debounce(function(){window.getComputedStyle(document.querySelector("body"),":after")},250),initPaper:function(){a(".paper mark").each(function(){var b,c=a(this),d=(a(this).find(".text"),c.data("gif"),a('<span class="text"></span>')),e=c.html();c.empty(),txtarr=e.split(" "),d.appendTo(c),a(txtarr).each(function(d,e){b=a("<span><em>"+e+"</em></span>"),b.appendTo(c.find(".text"))})}),this.mobile&&"Tablet"!=WURFL.form_factor?a(".paper").css({top:this.winHeight-a(".paper").outerHeight()}):a(".paper").css({opacity:1})},runExample:function(){var b=this;b.$paper.addClass("example"),a("mark").eq(0).addClass("show-phrase"),setTimeout(function(){a("mark").eq(0).removeClass("show-phrase"),setTimeout(function(){b.$paper.removeClass("example")},500)},1e3)},togglePaper:function(){a(".paper").hasClass("show-me")?(a(".toggle-paper").removeClass("open"),a(".paper").removeClass("show-me"),a("section").not("#header").show(),this.$paperWrap.css({top:this.winHeight-a(".paper").outerHeight()})):(a(".toggle-paper").addClass("open"),a(".paper").addClass("show-me"),a("section").not("#header").hide(),this.$paperWrap.css({top:a(".highlighter-sessions-toolbar").offset().top+a(".highlighter-sessions-toolbar").height()}),a("body, html").animate({scrollTop:a(".highlighter-sessions-toolbar").offset().top}))},openMobileMenu:function(){a(".mobile-menu").css("height",window.innerHeight),a("body").addClass("mobile-menu-open")},closeMobileMenu:function(){a("body").removeClass("mobile-menu-open")},showPhrase:function(b){var c=this,d=a(b),e=(a("mark",d),window.location.href+"/images/gifs/"),f=e+d.data("gif");d.addClass("show-phrase"),c.mobile&&"Tablet"!=WURFL.form_factor||a(".giffify").css({"background-image":"url("+f+")",opacity:.5})},resetPhrase:function(b){var c=a(b);c.removeClass("show-phrase"),a(".giffify").css({opacity:0})},resetAllPhrases:function(){a("show-phrase").removeClass("show-phrase"),a(".giffify").css({opacity:0})}},a(function(){PS.Highlighter.init()})}(jQuery);